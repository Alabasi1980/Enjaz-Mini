<div class="p-admin-users">
  <div class="c-page-header">
    <h2 class="c-title c-title--section">إدارة المستخدمين</h2>
    <button (click)="showAddForm.set(!showAddForm())" class="c-btn c-btn--primary">
      <svg xmlns="http://www.w3.org/2000/svg" class="c-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
      <span>{{ showAddForm() ? 'إلغاء' : 'إضافة مستخدم' }}</span>
    </button>
  </div>
  
  @if(showAddForm()) {
    <div class="c-form-card">
      <h3 class="c-title c-title--card">مستخدم جديد</h3>
      <div class="c-form-grid">
        <input type="text" placeholder="الاسم الكامل" [(ngModel)]="newUser().name" class="c-input">
        <input type="email" placeholder="البريد الإلكتروني" [(ngModel)]="newUser().email" class="c-input">
         <select [(ngModel)]="newUser().role" class="c-select">
          <option value="Employee">موظف</option>
          <option value="Manager">مدير</option>
          <option value="Admin">مسؤول</option>
        </select>
        <button (click)="addUser()" class="c-btn c-btn--success">حفظ</button>
      </div>
    </div>
  }

  <div class="c-table-container">
    <table class="c-table">
      <thead>
        <tr>
          <th>الاسم</th>
          <th>البريد الإلكتروني</th>
          <th>الدور</th>
          <th>إجراءات</th>
        </tr>
      </thead>
      <tbody>
        @for(user of users(); track user.id) {
          <tr>
            <td data-label="الاسم">{{ user.name }}</td>
            <td data-label="البريد الإلكتروني">{{ user.email }}</td>
            <td data-label="الدور">{{ user.role }}</td>
            <td data-label="إجراءات">
              <button (click)="deleteUser(user.id)" class="c-link c-link--danger">حذف</button>
            </td>
          </tr>
        }
         @if (users().length === 0) {
          <tr>
            <td colspan="4" class="u-text-center">لا يوجد مستخدمون لعرضهم.</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>